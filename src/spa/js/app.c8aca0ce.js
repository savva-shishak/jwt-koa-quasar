(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(e,t,r){e.exports=r("2f39")},"2f39":function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"getUser",function(){return G}),r.d(n,"getUsers",function(){return _});var o={};r.r(o),r.d(o,"newUsers",function(){return ve}),r.d(o,"setUser",function(){return de}),r.d(o,"logout",function(){return ge});var a={};r.r(a),r.d(a,"requestToCreate",function(){return ke}),r.d(a,"requestToLogin",function(){return me}),r.d(a,"newUsers",function(){return xe}),r.d(a,"forgetLogin",function(){return Te});var i=r("967e"),s=r.n(i),u=(r("96cf"),r("fa84")),c=r.n(u),p=(r("573e"),r("7d6e"),r("e54f"),r("62f2"),r("7e6d"),r("2b0e")),f=r("b05d"),l=r("4d5a"),h=r("9898"),b=r("f2cc"),v=r("c7a0"),d=r("2ea3"),g=r("65c6"),w=r("6ac5"),y=r("9c40"),k=r("0016"),O=r("497d"),m=r("6ab5"),j=r("033f"),x=r("e208"),P=r("f09f"),T=r("a370"),D=r("4b7e"),Q=r("27f9"),C=r("eb85"),S=r("714f"),I=r("2a19"),U=r("515f");p["a"].use(f["a"],{config:{},components:{QLayout:l["a"],QHeader:h["a"],QDrawer:b["a"],QPageContainer:v["a"],QPage:d["a"],QToolbar:g["a"],QToolbarTitle:w["a"],QBtn:y["a"],QIcon:k["a"],QList:O["a"],QItem:m["a"],QItemSection:j["a"],QItemLabel:x["a"],QCard:P["a"],QCardSection:T["a"],QCardActions:D["a"],QInput:Q["a"],QSeparator:C["a"]},directives:{Ripple:S["a"]},plugins:{Notify:I["a"],Cookies:U["a"]}});var q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"q-app"}},[r("router-view")],1)},E=[],B=r("a78e"),R=r.n(B),A=r("2f62"),L={name:"App",created:function(){var e=R.a.getJSON("user");this.setUser(e)},methods:Object(A["d"])(["setUser"])},N=L,J=r("2877"),V=Object(J["a"])(N,q,E,!1,null,null,null),z=V.exports,$={user:{name:null,login:null,password:null},users:[]};function G(e){return e.user}function _(e){return e.users}r("7f7f"),r("8e6e"),r("8a81"),r("ac6a"),r("cadf"),r("06db"),r("456d");var H=r("c47a"),F=r.n(H);function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(r,!0).forEach(function(t){F()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};I["a"].create(M({position:"top",message:e,color:"primary"},t))}function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};I["a"].create(M({position:"top",message:e,color:"warning"},t))}function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};I["a"].create(M({position:"top",message:e,color:"positive"},t))}function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};I["a"].create(M({position:"top",message:e,color:"info"},t))}function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};I["a"].create(M({position:"top",message:e,color:"negative"},t))}r("551c");var te=r("fc74"),re=r.n(te),ne=r("59a1"),oe=r.n(ne),ae=r("bc3a"),ie=r.n(ae);function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(r,!0).forEach(function(t){F()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ce=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};re()(this,e),this.refreshRequest=void 0,this.token=void 0,this.refreshToken=void 0,this.login=void 0,this.setClient(t.client),this.token=t.token||this.token,this.refreshToken=t.refreshToken||this.refreshToken,this.login=t.login||this.login,this.saveDataInBrowser()}return oe()(e,[{key:"setClientOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.login||e.token||e.refreshToken||this.client.post("auth/logout",{login:this.login,refreshToken:this.refreshToken}),this.token=e.token||this.token,this.refreshToken=e.refreshToken||this.refreshToken,this.login=e.login||this.login,this.saveDataInBrowser()}},{key:"setClient",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie.a.create();this.client=e,this.changeInterseptorsOfClient()}},{key:"changeInterseptorsOfClient",value:function(){var e=this;this.client.interceptors.request.use(function(t){return e.setAutorization(t)},function(e){return ee("Ошибка соединения"),Promise.reject(e)}),this.client.interceptors.response.use(function(e){return e},function(){var t=c()(s.a.mark(function t(r){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.tryGetNewRefresh(r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"setAutorization",value:function(e){if(!this.token)return e;var t=ue({headers:{}},e);return t.headers.Authorization="Bearer ".concat(this.token),t}},{key:"tryGetNewRefresh",value:function(){var e=c()(s.a.mark(function e(t){var r,n,o;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.refreshToken&&401===t.response.status&&!t.config.retry){e.next=2;break}return e.abrupt("return",t.response.status);case 2:return this.refreshRequest||(this.refreshRequest=this.client.post("/auth/refresh",{refreshToken:this.refreshToken,login:this.login})),e.next=5,this.refreshRequest;case 5:return r=e.sent,n=r.data,this.token=n.token,this.refreshToken=n.refreshToken,o=ue({},t.config,{retry:!0}),this.saveDataInBrowser(),e.abrupt("return",this.client(o));case 12:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"saveDataInBrowser",value:function(){var e={login:this.login,token:this.token,refreshToken:this.refreshToken};R.a.set("jwtClient",e,{expires:700})}}]),e}(),pe=ce;r("94db");function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(r,!0).forEach(function(t){F()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var he=ie.a.create(),be=new pe(le({},R.a.getJSON("jwtClient"),{client:he}));function ve(e,t){e.users=t}function de(e,t){t&&t.name&&(e.user=t,R.a.set("user",t,{expires:700}),Y("Добро пожаловать, ".concat(t.name,"!")))}function ge(e){var t={name:null,login:null,password:null};W("Ну и вали."),e.user=t,R.a.set("user",t),be.setClientOptions({login:null,token:null,refreshToken:null})}function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(r,!0).forEach(function(t){F()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ke(e,t){return Oe.apply(this,arguments)}function Oe(){return Oe=c()(s.a.mark(function e(t,r){var n,o,a,i,u,c;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,o=r.name,a=r.login,i=r.password,u=r.passwordCheck,""!=o.trim()){e.next=5;break}return X("Как вас зовут?"),e.abrupt("return");case 5:if(""!=a.trim()){e.next=8;break}return X("Придумайте логин"),e.abrupt("return");case 8:if(""!=i.trim()){e.next=11;break}return X("Придумайте пароль"),e.abrupt("return");case 11:if(i==u){e.next=14;break}return X("пароли не совпадают"),e.abrupt("return");case 14:return e.next=16,be.client.post("sigin",{name:o,login:a,password:i});case 16:if(c=e.sent,406!=c){e.next=20;break}return X("Пользователь с таким логином уже существует"),e.abrupt("return");case 20:return be.setClientOptions(ye({},c.data)),e.t0=n,e.next=24,be.client("users/"+a).then(function(e){var t=e.data;return t});case 24:e.t1=e.sent,(0,e.t0)("setUser",e.t1);case 26:case"end":return e.stop()}},e)})),Oe.apply(this,arguments)}function me(e,t){return je.apply(this,arguments)}function je(){return je=c()(s.a.mark(function e(t,r){var n,o,a,i;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,o=r.login,a=r.password,""!=o.trim()){e.next=5;break}return X("Укажите логин"),e.abrupt("return");case 5:if(""!=a.trim()){e.next=8;break}return X("Укажите пароль"),e.abrupt("return");case 8:return e.next=10,be.client.post("auth/login",{login:o,password:a});case 10:if(i=e.sent,404!=i){e.next=14;break}return ee("Пользователя с таким логином не существует"),e.abrupt("return");case 14:if(403!=i){e.next=17;break}return ee("Пароли не совпадают"),e.abrupt("return");case 17:n("setUser",i.data);case 18:case"end":return e.stop()}},e)})),je.apply(this,arguments)}function xe(e){return Pe.apply(this,arguments)}function Pe(){return Pe=c()(s.a.mark(function e(t){var r,n;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,be.client("users/");case 3:if(n=e.sent,"number"!=typeof n){e.next=6;break}return e.abrupt("return");case 6:r("newUsers",n.data.users);case 7:case"end":return e.stop()}},e)})),Pe.apply(this,arguments)}function Te(){return De.apply(this,arguments)}function De(){return De=c()(s.a.mark(function e(){return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:Z("У вас проблемы с памятью");case 1:case"end":return e.stop()}},e)})),De.apply(this,arguments)}var Qe={getters:n,mutations:o,actions:a,state:$};p["a"].use(A["a"]);var Ce=function(){var e=new A["a"].Store({modules:{example:Qe},strict:!1});return e},Se=r("8c4f"),Ie=[{path:"/",component:function(){return r.e("2d22c0ff").then(r.bind(null,"f241"))},children:[{path:"",component:function(){return r.e("2d0a400c").then(r.bind(null,"051b"))}},{path:"/login",component:function(){return r.e("2d0a314a").then(r.bind(null,"013f"))}},{path:"/sigin",component:function(){return r.e("2d22657a").then(r.bind(null,"e7f8"))}},{path:"/users",component:function(){return r.e("2d0a400c").then(r.bind(null,"051b"))}}]}];Ie.push({path:"*",component:function(){return r.e("4b47640d").then(r.bind(null,"e51e"))}});var Ue=Ie;p["a"].use(Se["a"]);var qe=function(){var e=new Se["a"]({scrollBehavior:function(){return{x:0,y:0}},routes:Ue,mode:"history",base:"/"});return e},Ee=function(){var e="function"===typeof Ce?Ce({Vue:p["a"]}):Ce,t="function"===typeof qe?qe({Vue:p["a"],store:e}):qe;e.$router=t;var r={el:"#q-app",router:t,store:e,render:function(e){return e(z)}};return{app:r,store:e,router:t}},Be=function(){var e=c()(s.a.mark(function e(t){var r;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=t.Vue,r.prototype.$axios=ie.a;case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Re=Ee(),Ae=Re.app,Le=Re.store,Ne=Re.router;function Je(){return Ve.apply(this,arguments)}function Ve(){return Ve=c()(s.a.mark(function e(){var t,r;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=[Be],r=0;case 2:if(!(r<t.length)){e.next=20;break}if("function"===typeof t[r]){e.next=5;break}return e.abrupt("continue",17);case 5:return e.prev=5,e.next=8,t[r]({app:Ae,router:Ne,store:Le,Vue:p["a"],ssrContext:null});case 8:e.next=17;break;case 10:if(e.prev=10,e.t0=e["catch"](5),!e.t0||!e.t0.url){e.next=15;break}return window.location.href=e.t0.url,e.abrupt("return");case 15:return console.error("[Quasar] boot error:",e.t0),e.abrupt("return");case 17:r++,e.next=2;break;case 20:new p["a"](Ae);case 21:case"end":return e.stop()}},e,null,[[5,10]])})),Ve.apply(this,arguments)}Je()},"7e6d":function(e,t,r){}},[[0,"runtime","vendor"]]]);